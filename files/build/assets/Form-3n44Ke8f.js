import{c as L,r as U,T as ae,a as M,e as k,d as u,f as e,t as h,n as I,g as se,h as i,u as l,i as H,j as W,k as m,l as C,F as $,m as w,p as oe,q as re}from"./app-DogBUM30.js";import{_ as le}from"./AdminLayout-Bn07MGW6.js";import{_ as y,a as _,b as v}from"./InputError-LtTzBhHm.js";import{T as ie,_ as G}from"./Toggle-DcmJmE5B.js";import{P as de}from"./PrimaryButton-CI0JHeR9.js";import{_ as ne}from"./SecondaryButton-DIkwtFCu.js";import{F as ue}from"./FlashMessage-PyI-3PM3.js";import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";const n=[];for(let o=0;o<256;++o)n.push((o+256).toString(16).slice(1));function ge(o,r=0){return(n[o[r+0]]+n[o[r+1]]+n[o[r+2]]+n[o[r+3]]+"-"+n[o[r+4]]+n[o[r+5]]+"-"+n[o[r+6]]+n[o[r+7]]+"-"+n[o[r+8]]+n[o[r+9]]+"-"+n[o[r+10]]+n[o[r+11]]+n[o[r+12]]+n[o[r+13]]+n[o[r+14]]+n[o[r+15]]).toLowerCase()}let q;const ce=new Uint8Array(16);function pe(){if(!q){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");q=crypto.getRandomValues.bind(crypto)}return q(ce)}const fe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),J={randomUUID:fe};function K(o,r,V){if(J.randomUUID&&!r&&!o)return J.randomUUID();o=o||{};const f=o.random||(o.rng||pe)();return f[6]=f[6]&15|64,f[8]=f[8]&63|128,ge(f)}const ye={class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},be={class:"py-12"},ve={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},xe={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},_e={class:"bg-gray-50 dark:bg-gray-700/50 p-6 rounded-lg"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},he={class:"col-span-2"},we=["value"],Ve=["value"],Ue={class:"col-span-2"},Ie={class:"bg-gray-50 dark:bg-gray-700/50 p-6 rounded-lg"},Ce={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},$e={class:"bg-gray-50 dark:bg-gray-700/50 p-6 rounded-lg"},qe={class:"space-y-4"},Fe={class:"flex items-start space-x-4"},Se={class:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4"},Ae={class:"mt-1 relative rounded-md shadow-sm"},je={class:"flex items-center space-x-3"},Be=["onClick","disabled"],De=["onClick","disabled"],Pe=["onClick"],Oe={key:0,class:"text-center py-8 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-600"},Re={class:"bg-gray-50 dark:bg-gray-700/50 p-6 rounded-lg"},Ee={class:"flex items-center space-x-6"},Ne={class:"flex-shrink-0"},Te=["src"],ze=["src"],Le={key:2,class:"h-32 w-32 rounded-lg bg-gray-100 dark:bg-gray-700 border-2 border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center"},Me={class:"flex-1"},He={class:"space-y-2"},We={class:"bg-gray-50 dark:bg-gray-700/50 p-6 rounded-lg"},Ge={class:"flex items-center justify-between"},Je={class:"flex items-center justify-end space-x-4"},Ke={__name:"Form",props:{food:{type:Object,default:null},categories:{type:Array,required:!0},branches:{type:Array,required:!0}},setup(o){var S,A,j,B,D,P,O,R,E,N,T,z;const r=o,V=L(()=>r.food?"Edit Food Item":"Create Food Item"),f=U(null),x=U(null),a=ae({name:((S=r.food)==null?void 0:S.name)??"",branch_id:((A=r.food)==null?void 0:A.branch_id)??"",category_id:((j=r.food)==null?void 0:j.category_id)??"",description:((B=r.food)==null?void 0:B.description)??"",base_price:((D=r.food)==null?void 0:D.base_price)??"",half_price:((P=r.food)==null?void 0:P.half_price)??"",preparation_time:((O=r.food)==null?void 0:O.preparation_time)??30,is_vegetarian:((R=r.food)==null?void 0:R.is_vegetarian)??!1,is_spicy:((E=r.food)==null?void 0:E.is_spicy)??!1,allergens:((N=r.food)==null?void 0:N.allergens)??[],image:null,is_available:((T=r.food)==null?void 0:T.is_available)??!0,extra_options:(((z=r.food)==null?void 0:z.extra_options)??[]).map(d=>({...d,tempId:K()}))}),Q=()=>{a.extra_options.push({tempId:K(),name:"",price:"",is_available:!0,sort_order:a.extra_options.length})},X=d=>{a.extra_options.splice(d,1)},F=(d,t)=>{const g=d+t;if(g>=0&&g<a.extra_options.length){const c=[...a.extra_options],s=c[d];c[d]=c[g],c[g]=s,a.extra_options=c}};U(!1),L(()=>({animation:200,disabled:!1,ghostClass:"ghost"}));const Y=d=>{const t=d.target.files[0];if(t){a.image=t;const g=new FileReader;g.onload=c=>{x.value=c.target.result},g.readAsDataURL(t)}},Z=()=>{a.image=null,x.value=null,f.value&&(f.value.value="")},ee=d=>{const t=d.startsWith("/")?d.slice(1):d;return`${window.location.origin}/storage/${t}`},te=()=>{r.food?a.put(route("admin.foods.update",r.food.id),{_method:"PUT",onSuccess:()=>{a.clearErrors()}}):a.post(route("admin.foods.store"),{onSuccess:()=>{a.reset(),x.value=null}})};return(d,t)=>(u(),M(le,{title:V.value},{header:k(()=>[e("h2",ye,h(V.value),1)]),default:k(()=>{var g,c;return[e("div",be,[e("div",ve,[d.$page.props.flash.success?(u(),M(ue,{key:0,message:d.$page.props.flash.success,class:"mb-4"},null,8,["message"])):I("",!0),e("div",xe,[e("form",{onSubmit:se(te,["prevent"]),class:"p-6 space-y-6"},[e("div",_e,[t[11]||(t[11]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},"Basic Information",-1)),e("div",ke,[e("div",he,[i(y,{for:"name",value:"Food Name",required:""}),i(_,{id:"name",modelValue:l(a).name,"onUpdate:modelValue":t[0]||(t[0]=s=>l(a).name=s),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),i(v,{message:l(a).errors.name,class:"mt-2"},null,8,["message"])]),e("div",null,[i(y,{for:"branch_id",value:"Branch",required:""}),H(e("select",{id:"branch_id","onUpdate:modelValue":t[1]||(t[1]=s=>l(a).branch_id=s),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",required:""},[t[9]||(t[9]=e("option",{value:""},"Select Branch",-1)),(u(!0),m($,null,C(o.branches,s=>(u(),m("option",{key:s.id,value:s.id},h(s.name),9,we))),128))],512),[[W,l(a).branch_id]]),i(v,{message:l(a).errors.branch_id,class:"mt-2"},null,8,["message"])]),e("div",null,[i(y,{for:"category_id",value:"Category",required:""}),H(e("select",{id:"category_id","onUpdate:modelValue":t[2]||(t[2]=s=>l(a).category_id=s),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",required:""},[t[10]||(t[10]=e("option",{value:""},"Select Category",-1)),(u(!0),m($,null,C(o.categories,s=>(u(),m("option",{key:s.id,value:s.id},h(s.name),9,Ve))),128))],512),[[W,l(a).category_id]]),i(v,{message:l(a).errors.category_id,class:"mt-2"},null,8,["message"])]),e("div",Ue,[i(y,{for:"description",value:"Description"}),i(ie,{id:"description",modelValue:l(a).description,"onUpdate:modelValue":t[3]||(t[3]=s=>l(a).description=s),class:"mt-1 block w-full",rows:"3"},null,8,["modelValue"]),i(v,{message:l(a).errors.description,class:"mt-2"},null,8,["message"])])])]),e("div",Ie,[t[12]||(t[12]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},"Pricing and Preparation",-1)),e("div",Ce,[e("div",null,[i(y,{for:"full",value:"Price-Full(৳)",required:""}),i(_,{id:"base_price",modelValue:l(a).base_price,"onUpdate:modelValue":t[4]||(t[4]=s=>l(a).base_price=s),type:"number",step:"0.01",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),i(v,{message:l(a).errors.base_price,class:"mt-2"},null,8,["message"])]),e("div",null,[i(y,{for:"half_price",value:"Price-Half(৳)",required:""}),i(_,{id:"half_price",modelValue:l(a).half_price,"onUpdate:modelValue":t[5]||(t[5]=s=>l(a).half_price=s),type:"number",step:"0.01",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),i(v,{message:l(a).errors.half_price,class:"mt-2"},null,8,["message"])]),e("div",null,[i(y,{for:"preparation_time",value:"Preparation Time (minutes)",required:""}),i(_,{id:"preparation_time",modelValue:l(a).preparation_time,"onUpdate:modelValue":t[6]||(t[6]=s=>l(a).preparation_time=s),type:"number",min:"1",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),i(v,{message:l(a).errors.preparation_time,class:"mt-2"},null,8,["message"])])])]),e("div",$e,[e("div",{class:"flex justify-between items-center mb-4"},[t[14]||(t[14]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Extra Options",-1)),e("button",{type:"button",onClick:Q,class:"inline-flex items-center px-3 py-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-md transition-colors duration-200 dark:bg-indigo-900/50 dark:hover:bg-indigo-800/50 dark:text-indigo-300"},t[13]||(t[13]=[e("i",{class:"fas fa-plus mr-1.5"},null,-1),w(" Add Option ")]))]),e("div",qe,[(u(!0),m($,null,C(l(a).extra_options,(s,p)=>(u(),m("div",{key:s.tempId,class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4"},[e("div",Fe,[e("div",Se,[e("div",null,[i(y,{for:`option-name-${p}`,value:"Option Name",required:""},null,8,["for"]),i(_,{id:`option-name-${p}`,modelValue:s.name,"onUpdate:modelValue":b=>s.name=b,type:"text",class:"mt-1 block w-full",required:""},null,8,["id","modelValue","onUpdate:modelValue"])]),e("div",null,[i(y,{for:`option-price-${p}`,value:"Price",required:""},null,8,["for"]),e("div",Ae,[t[15]||(t[15]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 dark:text-gray-400 sm:text-sm"},"$")],-1)),i(_,{id:`option-price-${p}`,modelValue:s.price,"onUpdate:modelValue":b=>s.price=b,type:"number",step:"0.01",class:"pl-7 block w-full",required:""},null,8,["id","modelValue","onUpdate:modelValue"])])])]),e("div",je,[i(G,{modelValue:s.is_available,"onUpdate:modelValue":b=>s.is_available=b,label:`Option ${p+1} Availability`},null,8,["modelValue","onUpdate:modelValue","label"]),e("button",{type:"button",onClick:b=>F(p,-1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",disabled:p===0},t[16]||(t[16]=[e("i",{class:"fas fa-arrow-up"},null,-1)]),8,Be),e("button",{type:"button",onClick:b=>F(p,1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",disabled:p===l(a).extra_options.length-1},t[17]||(t[17]=[e("i",{class:"fas fa-arrow-down"},null,-1)]),8,De),e("button",{type:"button",onClick:b=>X(p),class:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"},t[18]||(t[18]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Pe)])])]))),128)),l(a).extra_options.length?I("",!0):(u(),m("div",Oe,t[19]||(t[19]=[e("i",{class:"fas fa-list text-gray-400 text-3xl mb-3"},null,-1),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No extra options added yet. Add options like sizes, toppings, or customizations.",-1)])))])]),e("div",Re,[t[22]||(t[22]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},"Food Image",-1)),e("div",Ee,[e("div",Ne,[x.value?(u(),m("img",{key:0,src:x.value,class:"h-32 w-32 object-cover rounded-lg"},null,8,Te)):(g=o.food)!=null&&g.image_path?(u(),m("img",{key:1,src:ee(o.food.image_path),class:"h-32 w-32 object-cover rounded-lg"},null,8,ze)):(u(),m("div",Le,t[20]||(t[20]=[e("i",{class:"fas fa-camera text-gray-400 dark:text-gray-500 text-3xl"},null,-1)])))]),e("div",Me,[e("input",{type:"file",ref_key:"imageInput",ref:f,onChange:Y,accept:"image/*",class:"hidden"},null,544),e("div",He,[i(ne,{type:"button",onClick:t[7]||(t[7]=s=>d.$refs.imageInput.click())},{default:k(()=>{var s;return[w(h(x.value||(s=o.food)!=null&&s.image_path?"Change Image":"Select Image"),1)]}),_:1}),t[21]||(t[21]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Recommended size: 800x600 pixels",-1)),x.value||(c=o.food)!=null&&c.image_path?(u(),m("button",{key:0,type:"button",onClick:Z,class:"text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},"Remove Image")):I("",!0)]),i(v,{message:l(a).errors.image,class:"mt-2"},null,8,["message"])])])]),e("div",We,[e("div",Ge,[t[23]||(t[23]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Availability Status"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Control whether this food item is available for ordering")],-1)),i(G,{modelValue:l(a).is_available,"onUpdate:modelValue":t[8]||(t[8]=s=>l(a).is_available=s),label:"Food Availability"},null,8,["modelValue"])])]),e("div",Je,[i(l(oe),{href:d.route("admin.foods.index"),class:"inline-flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-gray-700 dark:text-gray-300 uppercase tracking-widest hover:bg-gray-200 dark:hover:bg-gray-700 active:bg-gray-300 dark:active:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150"},{default:k(()=>t[24]||(t[24]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),w(" Back to List ")])),_:1},8,["href"]),i(de,{class:re({"opacity-25":l(a).processing}),disabled:l(a).processing},{default:k(()=>[t[25]||(t[25]=e("i",{class:"fas fa-save mr-2"},null,-1)),w(" "+h(o.food?"Update Food Item":"Create Food Item"),1)]),_:1},8,["class","disabled"])])],32)])])])]}),_:1},8,["title"]))}},ot=me(Ke,[["__scopeId","data-v-afaffac4"]]);export{ot as default};
