import{r as x,c as I,w as R,a as Q,e as W,d as r,f as t,t as n,m as w,i as f,j as G,k as i,l as h,q as C,F as p,n as c,A as N,E as K,z as X}from"./app-CdoXpQ43.js";import{C as Y}from"./CustomerLayout-BNQSn1e_.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const tt={class:"max-w-7xl mx-auto px-4 sm:px-6"},et={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6"},st={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between"},at={class:"flex-1"},lt={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},ot={class:"mt-2 flex flex-wrap items-center gap-4"},nt={class:"inline-flex items-center text-gray-600 dark:text-gray-400"},rt={class:"inline-flex items-center text-gray-600 dark:text-gray-400"},it={class:"mt-4 lg:mt-0"},dt={class:"flex flex-col items-end"},ct={class:"min-h-screen bg-gray-50 dark:bg-gray-900 w-full"},ut={class:"container mx-auto px-4 py-8"},gt={class:"grid grid-cols-1 lg:grid-cols-5 gap-6"},xt={class:"lg:col-span-1"},pt={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg sticky top-24 p-6"},_t={class:"space-y-2"},ht=["onClick"],yt={class:"font-medium"},bt={class:"text-sm bg-indigo-50 dark:bg-indigo-900/20 px-2.5 py-1 rounded-full"},ft={class:"lg:col-span-2 rounded-2xl bg-white dark:bg-gray-900 shadow-md"},mt=["id"],vt={class:"dark:bg-gray-800 text-center rounded-t-2xl"},kt={class:"text-3xl font-bold text-gray-900 dark:text-white"},wt={class:"text-gray-600 dark:text-gray-400 leading-relaxed"},Ct={class:"grid grid-cols-1 gap-6"},Ft={class:"relative h-56"},Tt=["src","alt"],St={key:1,class:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center"},jt={class:"p-6"},Vt={class:"flex justify-between items-start mb-4"},$t={class:"text-xl font-semibold text-gray-900 dark:text-white"},It={class:"text-gray-600 dark:text-gray-400 line-clamp-2"},Nt={class:"flex space-x-2 items-center"},qt={key:0,class:"fas fa-leaf text-green-500 text-lg",title:"Vegetarian"},Ut={key:1,class:"fas fa-pepper-hot text-red-500 text-lg",title:"Spicy"},Ot={class:"space-y-2 text-sm text-gray-600 dark:text-gray-400 mb-4"},Bt={class:"flex items-center gap-2"},Mt={key:0,class:"flex items-center gap-2"},Dt={class:"flex justify-between items-center border-t border-gray-200 dark:border-gray-700 pt-4"},At={class:"flex items-center gap-3"},Lt={class:"text-xl font-bold text-gray-900 dark:text-white"},Pt={key:0,class:"text-xl font-bold text-gray-900 dark:text-white"},Et=["onClick","disabled"],zt={class:"lg:col-span-2"},Ht={class:"relative flex"},Jt={class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},Rt={class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},Qt=["onClick"],Wt={class:"mb-4"},Gt={class:"flex gap-4"},Kt={class:"flex items-center space-x-2 text-sm text-gray-700 dark:text-gray-300"},Xt=["name","onUpdate:modelValue","onChange"],Yt={key:0,class:"flex items-center space-x-2 text-sm text-gray-700 dark:text-gray-300"},Zt=["name","onUpdate:modelValue","onChange"],te={key:0,class:"mb-4"},ee=["value","onUpdate:modelValue","onChange"],se={class:"flex items-center gap-3 mb-4"},ae={class:"flex items-center border rounded-lg px-2 py-1 w-fit"},le=["onClick"],oe={class:"px-2 text-gray-900 dark:text-white"},ne=["onClick"],re={class:"flex justify-between items-center mb-4"},ie={class:"text-lg font-bold text-gray-900 dark:text-white"},de={key:0},ce={class:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-md text-center"},ue={class:"text-xl font-bold text-indigo-600 dark:text-indigo-400 ml-2"},ge=["disabled"],xe={key:0,class:"animate-spin h-5 w-5 text-white text-center",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},pe={__name:"FoodMenu",props:{branch:{type:Object,required:!0},categories:{type:Array,required:!0},foods:{type:Object,required:!0},auth:{type:Object,default:()=>({})}},setup(g){var j,V;const y=g,m=x(!1),q=x(!1),U=x(!1),F=x(null),v=x("collection"),d=x(((V=(j=JSON.parse(localStorage.getItem("selectedItem")))==null?void 0:j.items)==null?void 0:V.map(a=>({...a,selected_extras:a.selected_extras||[],base_price:parseFloat(a.base_price)||0,half_price:a.half_price?parseFloat(a.half_price):null,total:parseFloat(a.total)||0,portion:a.portion||"full"})))??[]),b=a=>{var o;const e=a.portion==="half"&&a.half_price?parseFloat(a.half_price):parseFloat(a.base_price),s=((o=a.selected_extras)==null?void 0:o.reduce((_,H)=>{const $=a.extra_options.find(J=>J.id===H);return _+($?parseFloat($.price):0)},0))||0,l=(e+s)*a.qty;return isNaN(l)?0:l},k=a=>{const e=d.value.find(s=>s.id===a);e&&(e.total=b(e),u())},O=()=>{u()},T=I(()=>{const a=d.value.reduce((e,s)=>{const l=parseFloat(s.total);return e+(isNaN(l)?0:l)},0);return isNaN(a)?0:a}),B=a=>{d.value=d.value.filter(e=>e.id!==a),u()},u=()=>{localStorage.setItem("selectedItem",JSON.stringify({items:d.value,sub_total:T.value,order_type:v.value,timestamp:new Date().toISOString()}))},M=()=>{d.value.length&&(m.value=!0,setTimeout(()=>{X.visit(route("customer.checkout",{branch:y.branch.id}))},1e3))},D=a=>{if(!a.is_available)return;const e=parseFloat(a.base_price)||0,s=a.half_price?parseFloat(a.half_price):null,l=d.value.find(o=>o.id===a.id&&o.portion==="full");if(l)l.qty+=1,l.total=b(l);else{const o={...a,qty:1,portion:"full",selected_extras:[],instructions:"",base_price:e,half_price:s,total:e};d.value.push(o)}u()},A=a=>{const e=d.value.find(s=>s.id===a);e&&(e.qty++,e.total=b(e),u())},L=a=>{const e=d.value.find(s=>s.id===a);e&&e.qty>1&&(e.qty--,e.total=b(e),u())};I(()=>{if(!y.branch.opening_hours)return!1;const a=new Date,e=a.toLocaleDateString("en-US",{weekday:"long"}),s=a.toLocaleTimeString("en-US",{hour12:!1}),l=y.branch.opening_hours.find(o=>o.day===e);return l?s>=l.open&&s<=l.close:!1});const P=a=>{let e=S(a);return q.value&&(e=e.filter(s=>s.is_vegetarian)),U.value&&(e=e.filter(s=>s.is_spicy)),e},S=a=>y.foods[a]||[],E=a=>{if(!a)return null;const e=a.startsWith("/")?a.slice(1):a;return`${window.location.origin}/storage/${e}`},z=a=>{F.value=a;const e=document.getElementById(`category-${a}`);e&&e.scrollIntoView({behavior:"smooth"})};return R(d,()=>{u()},{deep:!0}),(a,e)=>(r(),Q(Y,null,{default:W(()=>[t("div",tt,[t("div",et,[t("div",st,[t("div",at,[t("h1",lt,n(g.branch.name),1),t("div",ot,[t("span",nt,[e[1]||(e[1]=t("i",{class:"fas fa-map-marker-alt mr-2"},null,-1)),w(" "+n(g.branch.address),1)]),t("span",rt,[e[2]||(e[2]=t("i",{class:"fas fa-phone mr-2"},null,-1)),w(" "+n(g.branch.contact_number),1)])])]),t("div",it,[t("div",dt,[e[4]||(e[4]=t("label",{for:"orderType",class:"mb-1 text-sm text-gray-700 dark:text-gray-300 font-medium"},"Order Type",-1)),f(t("select",{id:"orderType","onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),onChange:O,class:"w-48 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"},e[3]||(e[3]=[t("option",{value:"delivery"},"Delivery",-1),t("option",{value:"collection"},"Collection",-1)]),544),[[G,v.value]])])])])]),t("div",ct,[t("div",ut,[t("div",gt,[t("aside",xt,[t("div",pt,[e[5]||(e[5]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-4"},"Menu Categories",-1)),t("nav",_t,[(r(!0),i(p,null,h(g.categories,s=>(r(),i("button",{key:s.id,onClick:l=>z(s.id),class:C(["w-full text-left px-4 py-3 rounded-lg transition-all duration-200 flex justify-between items-center text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",{"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":F.value===s.id}])},[t("span",yt,n(s.name),1),t("span",bt,n(S(s.id).length),1)],10,ht))),128))])])]),t("main",ft,[(r(!0),i(p,null,h(g.categories,s=>(r(),i("section",{key:s.id,id:`category-${s.id}`,class:"scroll-mt-24 mb-8"},[t("div",vt,[t("h2",kt,n(s.name),1),t("p",wt,n(s.description),1)]),t("div",Ct,[(r(!0),i(p,null,h(P(s.id),l=>{var o;return r(),i("article",{key:l.id,class:"bg-white dark:bg-gray-800 shadow-md overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 rounded-b-2xl"},[t("div",Ft,[l.image_path?(r(),i("img",{key:0,src:E(l.image_path),alt:l.name,class:"w-full h-full object-cover"},null,8,Tt)):c("",!0),l.is_available?c("",!0):(r(),i("div",St,e[6]||(e[6]=[t("span",{class:"text-white font-semibold text-lg"},"Currently Unavailable",-1)])))]),t("div",jt,[t("div",Vt,[t("div",null,[t("h3",$t,n(l.name),1),t("p",It,n(l.description),1)]),t("div",Nt,[l.is_vegetarian?(r(),i("i",qt)):c("",!0),l.is_spicy?(r(),i("i",Ut)):c("",!0)])]),t("div",Ot,[t("div",Bt,[e[7]||(e[7]=t("i",{class:"fas fa-clock w-5 text-indigo-500"},null,-1)),t("span",null,"Prep time: "+n(l.preparation_time)+" mins",1)]),(o=l.allergens)!=null&&o.length?(r(),i("div",Mt,[e[8]||(e[8]=t("i",{class:"fas fa-exclamation-circle w-5 text-amber-500"},null,-1)),t("span",null,"Allergens: "+n(l.allergens.join(", ")),1)])):c("",!0)]),t("div",Dt,[t("div",At,[t("span",Lt,"৳"+n(l.base_price)+"(Full)",1),l.half_price?(r(),i("span",Pt,"৳"+n(l.half_price)+"(Half)",1)):c("",!0)]),t("button",{onClick:_=>D(l),disabled:!l.is_available,class:C(["inline-flex items-center px-5 py-2.5 rounded-lg text-sm font-medium transition-colors duration-200",[l.is_available?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-gray-300 text-gray-500 cursor-not-allowed"]])},n(l.is_available?"Add to Cart":"Not Available"),11,Et)])])])}),128))])],8,mt))),128))]),t("div",zt,[(r(!0),i(p,null,h(d.value,(s,l)=>(r(),i("div",{key:s.id,class:C(["bg-white dark:bg-gray-800 rounded-2xl shadow-lg top-24 p-6",l>0?"mt-2":""])},[t("div",Ht,[t("div",null,[t("h2",Jt,n(s.name),1),t("p",Rt,n(s.description),1)]),t("button",{onClick:o=>B(s.id),class:"absolute top-0 right-0 text-2xl text-white bg-red-600 hover:bg-red-700 rounded-full w-7 h-7 flex items-center justify-center shadow-lg",title:"Remove"},"×",8,Qt)]),t("div",Wt,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Portion",-1)),t("div",Gt,[t("label",Kt,[f(t("input",{type:"radio",name:`portion-${s.id}`,value:"full",class:"form-radio text-indigo-600","onUpdate:modelValue":o=>s.portion=o,onChange:o=>k(s.id),checked:""},null,40,Xt),[[N,s.portion]]),t("span",null,"Full (৳"+n(s.base_price)+")",1)]),s.half_price?(r(),i("label",Yt,[f(t("input",{type:"radio",name:`portion-${s.id}`,value:"half",class:"form-radio text-indigo-600","onUpdate:modelValue":o=>s.portion=o,onChange:o=>k(s.id)},null,40,Zt),[[N,s.portion]]),t("span",null,"Half (৳"+n(s.half_price)+")",1)])):c("",!0)])]),s.extra_options.length>0?(r(),i("div",te,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Extra Options",-1)),t("div",null,[(r(!0),i(p,null,h(s.extra_options,o=>(r(),i("label",{key:o.id,class:"flex items-center space-x-2 text-sm text-gray-700 dark:text-gray-300"},[f(t("input",{type:"checkbox",value:o.id,class:"form-checkbox text-indigo-600","onUpdate:modelValue":_=>s.selected_extras=_,onChange:_=>k(s.id)},null,40,ee),[[K,s.selected_extras]]),t("span",null,n(o.name)+" (+৳"+n(o.price)+")",1)]))),128))])])):c("",!0),t("div",se,[e[11]||(e[11]=t("span",{class:"text-sm text-gray-600 dark:text-gray-300"},"Quantity",-1)),t("div",ae,[t("button",{onClick:o=>L(s.id),class:"text-indigo-600 text-xl font-bold px-2"},"−",8,le),t("span",oe,n(s.qty),1),t("button",{onClick:o=>A(s.id),class:"text-indigo-600 text-xl font-bold px-2"},"+",8,ne)])]),t("div",re,[e[12]||(e[12]=t("span",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Total:",-1)),t("span",ie,"৳ "+n(s.total),1)])],2))),128)),d.value.length>0?(r(),i("div",de,[t("div",ce,[e[13]||(e[13]=t("span",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300"},"Sub Total:",-1)),t("span",ue,"৳ "+n(T.value),1)]),t("button",{onClick:M,disabled:m.value,class:"w-full text-lg bg-indigo-600 text-white hover:bg-indigo-700 text-center px-5 py-2.5 rounded-lg transition-colors duration-200 flex justify-center items-center mt-2"},[m.value?(r(),i("svg",xe,e[14]||(e[14]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)]))):(r(),i(p,{key:1},[w("Proceed To Checkout")],64))],8,ge)])):c("",!0)])])])])])]),_:1}))}},be=Z(pe,[["__scopeId","data-v-4d62666b"]]);export{be as default};
