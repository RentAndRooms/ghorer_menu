import{r as B,b as H,T as Z,d as ee,e as ae,c as z,w as _,f as te,o as u,a,t as f,g as re,h as l,u as s,i as U,v as $,j as g,k as h,F as x,l as V,m as le,n as se}from"./app-Cl_Gz0g5.js";import{_ as de}from"./AdminLayout-CGXrBpyU.js";import{_ as m,a as c,b as y}from"./InputError-DL1Nd6b6.js";import{T as ne}from"./TextArea-CTbgG1pk.js";import{P as oe}from"./PrimaryButton-RmJ4y54j.js";import{_ as ie}from"./SecondaryButton-CwK6MVDY.js";import{D as ue}from"./DangerButton-BDDfM822.js";import{_ as me}from"./Toggle-BfAa8FhW.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                 */const ce={class:"text-xl text-center font-semibold leading-tight text-gray-800 dark:text-gray-200"},ye={class:"py-12"},pe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},be={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},fe={class:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ke={class:"md:col-span-2"},_e={class:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg"},he={class:"grid grid-cols-1 md:grid-cols-1"},xe={class:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg"},Ve={class:"grid grid-cols-1 sm:grid-cols-3 gap-6"},we=["value"],Ue=["value"],$e=["value"],Ce={class:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg"},Ae={class:"space-y-6"},Te={class:"flex items-start space-x-4"},Be={class:"w-32"},De=["id","onUpdate:modelValue"],Ie=["value"],Se=["onClick"],qe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Me={class:"flex gap-2"},je={class:"flex gap-2"},Le={class:"flex gap-2"},Fe={class:"mt-2 flex items-center"},Ne=["src"],Oe=["src"],Re={key:2,class:"h-32 w-32 rounded-lg bg-gray-200 dark:bg-gray-700 flex items-center justify-center"},Ee={class:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg"},Pe={class:"flex items-center justify-between"},He={class:"flex items-center justify-end space-x-3"},ze={__name:"Form",props:{branch:{type:Object,default:null},cities:{type:Array,default:()=>[]},locals:{type:Array,default:()=>[]}},setup(p){var I,S,q,M,j,L,F,N,O,R,E,P;const C=B(null),v=B(null),i=p,k=B([]),D=H(()=>i.branch?"Edit Restaurant":"Create Restaurant"),A=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],G=n=>{const e=n.target.files[0];if(e){r.image=e;const b=new FileReader;b.onload=w=>{v.value=w.target.result},b.readAsDataURL(e)}},W=()=>{r.image=null,v.value=null,C.value&&(C.value.value="")},J=n=>!n||!Array.isArray(n)?[{day:"Monday",open:"09:00",close:"22:00",breakfast:{start:"08:00",end:"10:00"},lunch:{start:"12:00",end:"15:00"},dinner:{start:"18:00",end:"22:00"}}]:n.map(e=>({day:e.day||"Monday",open:e.open||"09:00",close:e.close||"22:00",breakfast:e.breakfast||{start:"08:00",end:"10:00"},lunch:e.lunch||{start:"12:00",end:"15:00"},dinner:e.dinner||{start:"18:00",end:"22:00"}})),r=Z({name:((I=i.branch)==null?void 0:I.name)??"",address:((S=i.branch)==null?void 0:S.address)??"",latitude:((q=i.branch)==null?void 0:q.latitude)??"",map_url:((M=i.branch)==null?void 0:M.map_url)??"",contact_number:((j=i.branch)==null?void 0:j.contact_number)??"",district_id:((L=i.branch)==null?void 0:L.district_id)??"",thana_id:((F=i.branch)==null?void 0:F.thana_id)??"",local_id:((N=i.branch)==null?void 0:N.local_id)??"",image:((O=i.branch)==null?void 0:O.image)??"",opening_hours:J((R=i.branch)==null?void 0:R.opening_hours),delivery_radius:((E=i.branch)==null?void 0:E.delivery_radius)??5,is_active:((P=i.branch)==null?void 0:P.is_active)??!0}),K=()=>{const n=A.find(e=>!r.opening_hours.some(b=>b.day===e))||A[0];r.opening_hours.push({day:n,open:"09:00",close:"22:00",breakfast:{start:"08:00",end:"10:00"},lunch:{start:"12:00",end:"15:00"},dinner:{start:"18:00",end:"22:00"}})},Q=H(()=>r.thana_id?i.locals.filter(n=>n.area_id==r.thana_id):[]),X=n=>{r.opening_hours.length>1&&r.opening_hours.splice(n,1)},T=async()=>{if(!r.district_id){k.value=[],r.thana_id="";return}try{const n=await te.get(`/admin/area/${r.district_id}`);k.value=n.data,k.value.some(e=>e.id===r.thana_id)||(r.thana_id="")}catch(n){console.error("Error fetching areas:",n),k.value=[]}};ee(()=>r.district_id,()=>{T()}),ae(()=>{r.district_id&&T()});const Y=()=>{i.branch?r.put(route("admin.branches.update",i.branch.id)):r.post(route("admin.branches.store"))};return(n,e)=>(u(),z(de,{title:D.value},{default:_(()=>{var b,w;return[a("h2",ce,f(D.value),1),a("div",ye,[a("div",pe,[a("div",be,[a("form",{onSubmit:re(Y,["prevent"]),class:"p-6 space-y-6"},[a("section",fe,[e[9]||(e[9]=a("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},"Basic Information",-1)),a("div",ve,[a("div",null,[l(m,{for:"name",value:"Restuarent Name"}),l(c,{id:"name",modelValue:s(r).name,"onUpdate:modelValue":e[0]||(e[0]=t=>s(r).name=t),type:"text",class:"mt-1 block w-full dark:bg-gray-900 dark:text-gray-300",required:""},null,8,["modelValue"]),l(y,{message:s(r).errors.name,class:"mt-2"},null,8,["message"])]),a("div",null,[l(m,{for:"contact_number",value:"Contact Number"}),l(c,{id:"contact_number",modelValue:s(r).contact_number,"onUpdate:modelValue":e[1]||(e[1]=t=>s(r).contact_number=t),type:"text",class:"mt-1 block w-full dark:bg-gray-900 dark:text-gray-300",required:""},null,8,["modelValue"]),l(y,{message:s(r).errors.contact_number,class:"mt-2"},null,8,["message"])]),a("div",ke,[l(m,{for:"address",value:"Address"}),l(ne,{id:"address",modelValue:s(r).address,"onUpdate:modelValue":e[2]||(e[2]=t=>s(r).address=t),class:"mt-1 block w-full dark:bg-gray-900 dark:text-gray-300",rows:"2",required:""},null,8,["modelValue"]),l(y,{message:s(r).errors.address,class:"mt-2"},null,8,["message"])])])]),a("section",_e,[e[10]||(e[10]=a("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"}," Location & Delivery Area ",-1)),a("div",he,[a("div",null,[l(m,{for:"map_url",value:"Google Map Url"}),l(c,{id:"map_url",modelValue:s(r).map_url,"onUpdate:modelValue":e[3]||(e[3]=t=>s(r).map_url=t),type:"text",step:"any",class:"mt-1 block w-full dark:bg-gray-900 dark:text-gray-300",required:""},null,8,["modelValue"]),l(y,{message:s(r).errors.map_url,class:"mt-2"},null,8,["message"])])])]),a("section",xe,[e[14]||(e[14]=a("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},"Address",-1)),a("div",Ve,[a("div",null,[l(m,{for:"city_id",value:"City"}),U(a("select",{id:"city_id","onUpdate:modelValue":e[4]||(e[4]=t=>s(r).district_id=t),onChange:T,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-900 dark:text-gray-300",required:""},[e[11]||(e[11]=a("option",{value:""},"Select a city",-1)),(u(!0),g(x,null,h(p.cities,t=>(u(),g("option",{key:t.id,value:t.id},f(t.name),9,we))),128))],544),[[$,s(r).district_id]]),l(y,{message:s(r).errors.district_id,class:"mt-2"},null,8,["message"])]),a("div",null,[l(m,{for:"thana_id",value:"Area"}),U(a("select",{id:"thana_id","onUpdate:modelValue":e[5]||(e[5]=t=>s(r).thana_id=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-900 dark:text-gray-300",required:""},[e[12]||(e[12]=a("option",{value:""},"Select an Area",-1)),(u(!0),g(x,null,h(k.value,t=>(u(),g("option",{key:t.id,value:t.id},f(t.name),9,Ue))),128))],512),[[$,s(r).thana_id]]),l(y,{message:s(r).errors.thana_id,class:"mt-2"},null,8,["message"])]),a("div",null,[l(m,{for:"local_id",value:"Local"}),U(a("select",{id:"local_id","onUpdate:modelValue":e[6]||(e[6]=t=>s(r).local_id=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-900 dark:text-gray-300"},[e[13]||(e[13]=a("option",{value:""},"Select a Local Area",-1)),(u(!0),g(x,null,h(Q.value,t=>(u(),g("option",{key:t.id,value:t.id},f(t.name),9,$e))),128))],512),[[$,s(r).local_id]]),l(y,{message:s(r).errors.local_id,class:"mt-2"},null,8,["message"])])])]),a("section",Ce,[e[17]||(e[17]=a("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"}," Opening Hours & Meal Times ",-1)),a("div",Ae,[(u(!0),g(x,null,h(s(r).opening_hours,(t,o)=>(u(),g("div",{key:o,class:"space-y-4 border p-4 rounded-lg dark:border-gray-600"},[a("div",Te,[a("div",Be,[l(m,{for:`day-${o}`,value:"Day"},null,8,["for"]),U(a("select",{id:`day-${o}`,"onUpdate:modelValue":d=>t.day=d,class:"mt-1 block w-full dark:bg-gray-900 dark:text-gray-300",required:""},[(u(),g(x,null,h(A,d=>a("option",{key:d,value:d},f(d),9,Ie)),64))],8,De),[[$,t.day]])]),a("div",null,[l(m,{for:`open-${o}`,value:"Opening Time"},null,8,["for"]),l(c,{id:`open-${o}`,modelValue:t.open,"onUpdate:modelValue":d=>t.open=d,type:"time",class:"mt-1 block w-full dark:bg-gray-900 dark:text-gray-300",required:""},null,8,["id","modelValue","onUpdate:modelValue"])]),a("div",null,[l(m,{for:`close-${o}`,value:"Closing Time"},null,8,["for"]),l(c,{id:`close-${o}`,modelValue:t.close,"onUpdate:modelValue":d=>t.close=d,type:"time",class:"mt-1 block w-full dark:bg-gray-900 dark:text-gray-300",required:""},null,8,["id","modelValue","onUpdate:modelValue"])]),a("button",{type:"button",onClick:d=>X(o),class:"mt-7 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300"},e[15]||(e[15]=[a("i",{class:"fas fa-trash"},null,-1)]),8,Se)]),a("div",qe,[a("div",null,[l(m,{for:`breakfast-${o}`,value:"Breakfast Time"},null,8,["for"]),a("div",Me,[l(c,{id:`breakfast-start-${o}`,modelValue:t.breakfast.start,"onUpdate:modelValue":d=>t.breakfast.start=d,type:"time",class:"mt-1 w-1/2 dark:bg-gray-900 dark:text-gray-300"},null,8,["id","modelValue","onUpdate:modelValue"]),l(c,{id:`breakfast-end-${o}`,modelValue:t.breakfast.end,"onUpdate:modelValue":d=>t.breakfast.end=d,type:"time",class:"mt-1 w-1/2 dark:bg-gray-900 dark:text-gray-300"},null,8,["id","modelValue","onUpdate:modelValue"])])]),a("div",null,[l(m,{for:`lunch-${o}`,value:"Lunch Time"},null,8,["for"]),a("div",je,[l(c,{id:`lunch-start-${o}`,modelValue:t.lunch.start,"onUpdate:modelValue":d=>t.lunch.start=d,type:"time",class:"mt-1 w-1/2 dark:bg-gray-900 dark:text-gray-300"},null,8,["id","modelValue","onUpdate:modelValue"]),l(c,{id:`lunch-end-${o}`,modelValue:t.lunch.end,"onUpdate:modelValue":d=>t.lunch.end=d,type:"time",class:"mt-1 w-1/2 dark:bg-gray-900 dark:text-gray-300"},null,8,["id","modelValue","onUpdate:modelValue"])])]),a("div",null,[l(m,{for:`dinner-${o}`,value:"Dinner Time"},null,8,["for"]),a("div",Le,[l(c,{id:`dinner-start-${o}`,modelValue:t.dinner.start,"onUpdate:modelValue":d=>t.dinner.start=d,type:"time",class:"mt-1 w-1/2 dark:bg-gray-900 dark:text-gray-300"},null,8,["id","modelValue","onUpdate:modelValue"]),l(c,{id:`dinner-end-${o}`,modelValue:t.dinner.end,"onUpdate:modelValue":d=>t.dinner.end=d,type:"time",class:"mt-1 w-1/2 dark:bg-gray-900 dark:text-gray-300"},null,8,["id","modelValue","onUpdate:modelValue"])])])])]))),128)),a("button",{type:"button",onClick:K,class:"mt-2 inline-flex items-center px-4 py-2 bg-gray-800 dark:bg-gray-200 border border-transparent rounded-md font-semibold text-xs text-white dark:text-gray-800 uppercase tracking-widest hover:bg-gray-700 dark:hover:bg-white focus:bg-gray-700 dark:focus:bg-white active:bg-gray-900 dark:active:bg-gray-300 transition ease-in-out duration-150"},e[16]||(e[16]=[a("i",{class:"fas fa-plus mr-2"},null,-1),V(" Add Day ")])),l(y,{message:s(r).errors.opening_hours,class:"mt-2"},null,8,["message"])])]),a("div",null,[l(m,{for:"image",value:"Image"}),a("div",Fe,[v.value?(u(),g("img",{key:0,src:v.value,class:"h-32 w-32 object-cover rounded-lg"},null,8,Ne)):(b=p.branch)!=null&&b.image_path?(u(),g("img",{key:1,src:`/storage/${p.branch.image_path}`,class:"h-32 w-32 object-cover rounded-lg"},null,8,Oe)):(u(),g("div",Re,e[18]||(e[18]=[a("i",{class:"fas fa-camera text-gray-400 dark:text-gray-500 text-3xl"},null,-1)]))),a("input",{type:"file",id:"image",ref_key:"imageInput",ref:C,class:"hidden",onChange:G,accept:"image/*"},null,544),l(ie,{type:"button",class:"ml-4",onClick:e[7]||(e[7]=t=>n.$refs.imageInput.click())},{default:_(()=>{var t;return[V(f(v.value||(t=p.branch)!=null&&t.image_path?"Change Image":"Select Image"),1)]}),_:1}),v.value||(w=p.branch)!=null&&w.image_path?(u(),z(ue,{key:3,type:"button",class:"ml-2",onClick:W},{default:_(()=>e[19]||(e[19]=[V(" Remove")])),_:1})):le("",!0)]),l(y,{message:s(r).errors.image,class:"mt-2"},null,8,["message"])]),a("section",Ee,[a("div",Pe,[e[20]||(e[20]=a("div",null,[a("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Branch Status"),a("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Enable or disable this branch")],-1)),l(me,{modelValue:s(r).is_active,"onUpdate:modelValue":e[8]||(e[8]=t=>s(r).is_active=t),class:"ml-4"},null,8,["modelValue"])])]),a("div",He,[l(s(se),{href:n.route("admin.branches.index"),class:"inline-flex items-center px-4 py-2 bg-gray-200 dark:bg-gray-700 border border-transparent rounded-md font-semibold text-xs text-gray-700 dark:text-gray-300 uppercase tracking-widest hover:bg-gray-300 dark:hover:bg-gray-600 focus:bg-gray-300 dark:focus:bg-gray-600 active:bg-gray-300 dark:active:bg-gray-600"},{default:_(()=>e[21]||(e[21]=[V(" Cancel")])),_:1},8,["href"]),l(oe,{disabled:s(r).processing},{default:_(()=>[V(f(p.branch?"Update Branch":"Create Branch"),1)]),_:1},8,["disabled"])])],32)])])])]}),_:1},8,["title"]))}},ta=ge(ze,[["__scopeId","data-v-e3e262be"]]);export{ta as default};
