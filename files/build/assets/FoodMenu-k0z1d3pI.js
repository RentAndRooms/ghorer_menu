import{r as x,b as I,d as G,c as K,w as U,o as i,a as e,h as X,m as b,u as Y,p as Z,k as r,t as n,q as v,n as c,i as k,j as ee,l as f,F as h,z as te,B,A as se}from"./app-DRMQu1Qj.js";import{C as ae}from"./CustomerLayout-ZGY1MTGJ.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={class:"max-w-7xl mx-auto px-4 sm:px-6 py-4 flex justify-center mb-4"},ne={class:"flex items-center space-x-2"},ie={class:"font-medium"},re={class:"max-w-7xl mx-auto px-4 sm:px-6"},de={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6"},ce={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between"},ue={class:"flex-1"},ge={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},xe={class:"mt-2 flex flex-wrap items-center gap-4"},pe={class:"inline-flex items-center text-gray-600 dark:text-gray-400"},he={class:"inline-flex items-center text-gray-600 dark:text-gray-400"},_e={class:"mt-4 lg:mt-0"},fe={class:"flex flex-col items-end"},ye={class:"min-h-screen bg-gray-50 dark:bg-gray-900 w-full"},me={class:"container mx-auto px-4 py-8"},be={class:"grid grid-cols-1 lg:grid-cols-5 gap-6"},ve={class:"lg:col-span-1"},ke={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg sticky top-24 p-6"},we={class:"space-y-2"},Ce=["onClick"],Fe={class:"font-medium"},Te={class:"text-sm bg-indigo-50 dark:bg-indigo-900/20 px-2.5 py-1 rounded-full"},$e={class:"lg:col-span-2 rounded-2xl bg-white dark:bg-gray-900 shadow-md"},Se=["id"],je={class:"dark:bg-gray-800 text-center rounded-t-2xl"},Ve={class:"text-3xl font-bold text-gray-900 dark:text-white"},Ne={class:"text-gray-600 dark:text-gray-400 leading-relaxed"},qe={class:"grid grid-cols-1 gap-6"},Ie={class:"relative h-56"},Ue=["src","alt"],Be={key:1,class:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center"},Oe={class:"p-6"},Me={class:"flex justify-between items-start mb-4"},De={class:"text-xl font-semibold text-gray-900 dark:text-white"},Ae={class:"text-gray-600 dark:text-gray-400 line-clamp-2"},Le={class:"flex space-x-2 items-center"},Pe={key:0,class:"fas fa-leaf text-green-500 text-lg",title:"Vegetarian"},ze={key:1,class:"fas fa-pepper-hot text-red-500 text-lg",title:"Spicy"},He={class:"space-y-2 text-sm text-gray-600 dark:text-gray-400 mb-4"},Ee={class:"flex items-center gap-2"},Je={key:0,class:"flex items-center gap-2"},Re={class:"flex justify-between items-center border-t border-gray-200 dark:border-gray-700 pt-4"},Qe={class:"flex items-center gap-3"},We={class:"text-xl font-bold text-gray-900 dark:text-white"},Ge={key:0,class:"text-xl font-bold text-gray-900 dark:text-white"},Ke=["onClick","disabled"],Xe={class:"lg:col-span-2"},Ye={class:"relative flex"},Ze={class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},et={class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},tt=["onClick"],st={class:"mb-4"},at={class:"flex gap-4"},lt={class:"flex items-center space-x-2 text-sm text-gray-700 dark:text-gray-300"},ot=["name","onUpdate:modelValue","onChange"],nt={key:0,class:"flex items-center space-x-2 text-sm text-gray-700 dark:text-gray-300"},it=["name","onUpdate:modelValue","onChange"],rt={key:0,class:"mb-4"},dt=["value","onUpdate:modelValue","onChange"],ct={class:"flex items-center gap-3 mb-4"},ut={class:"flex items-center border rounded-lg px-2 py-1 w-fit"},gt=["onClick"],xt={class:"px-2 text-gray-900 dark:text-white"},pt=["onClick"],ht={class:"flex justify-between items-center mb-4"},_t={class:"text-lg font-bold text-gray-900 dark:text-white"},ft={key:0},yt={class:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-md text-center"},mt={class:"text-xl font-bold text-indigo-600 dark:text-indigo-400 ml-2"},bt=["disabled"],vt={key:0,class:"animate-spin h-5 w-5 text-white text-center",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},kt={__name:"FoodMenu",props:{branch:{type:Object,required:!0},categories:{type:Array,required:!0},foods:{type:Object,required:!0},auth:{type:Object,default:()=>({})}},setup(p){var V,N;const y=p,w=x(!1),O=x(!1),M=x(!1),T=x(null),C=x("collection"),d=x(((N=(V=JSON.parse(localStorage.getItem("selectedItem")))==null?void 0:V.items)==null?void 0:N.map(a=>({...a,selected_extras:a.selected_extras||[],base_price:parseFloat(a.base_price)||0,half_price:a.half_price?parseFloat(a.half_price):null,total:parseFloat(a.total)||0,portion:a.portion||"full"})))??[]),u=x({show:!1,message:"",type:"success"}),$=(a,t="success",s=3e3)=>{u.value.message=a,u.value.type=t,u.value.show=!0,setTimeout(()=>{u.value.show=!1},s)},m=a=>{var o;const t=a.portion==="half"&&a.half_price?parseFloat(a.half_price):parseFloat(a.base_price),s=((o=a.selected_extras)==null?void 0:o.reduce((_,Q)=>{const q=a.extra_options.find(W=>W.id===Q);return _+(q?parseFloat(q.price):0)},0))||0,l=(t+s)*a.qty;return isNaN(l)?0:l},F=a=>{const t=d.value.find(s=>s.id===a);t&&(t.total=m(t),g())},D=()=>{g()},S=I(()=>{const a=d.value.reduce((t,s)=>{const l=parseFloat(s.total);return t+(isNaN(l)?0:l)},0);return isNaN(a)?0:a}),A=a=>{d.value=d.value.filter(t=>t.id!==a),g()},g=()=>{localStorage.setItem("selectedItem",JSON.stringify({items:d.value,sub_total:S.value,order_type:C.value,timestamp:new Date().toISOString()}))},L=()=>{d.value.length&&(w.value=!0,setTimeout(()=>{te.visit(route("customer.checkout",{branch:y.branch.id}))},1e3))},P=a=>{if(!a.is_available)return;const t=parseFloat(a.base_price)||0,s=a.half_price?parseFloat(a.half_price):null,l=d.value.find(o=>o.id===a.id&&o.portion==="full");if(l)l.qty+=1,l.total=m(l),$(`${a.name} quantity updated! (${l.qty})`);else{const o={...a,qty:1,portion:"full",selected_extras:[],instructions:"",base_price:t,half_price:s,total:t};d.value.push(o),$(`${a.name} added to cart!`)}g()},z=a=>{const t=d.value.find(s=>s.id===a);t&&(t.qty++,t.total=m(t),g())},H=a=>{const t=d.value.find(s=>s.id===a);t&&t.qty>1&&(t.qty--,t.total=m(t),g())};I(()=>{if(!y.branch.opening_hours)return!1;const a=new Date,t=a.toLocaleDateString("en-US",{weekday:"long"}),s=a.toLocaleTimeString("en-US",{hour12:!1}),l=y.branch.opening_hours.find(o=>o.day===t);return l?s>=l.open&&s<=l.close:!1});const E=a=>{let t=j(a);return O.value&&(t=t.filter(s=>s.is_vegetarian)),M.value&&(t=t.filter(s=>s.is_spicy)),t},j=a=>y.foods[a]||[],J=a=>{if(!a)return null;const t=a.startsWith("/")?a.slice(1):a;return`${window.location.origin}/storage/${t}`},R=a=>{T.value=a;const t=document.getElementById(`category-${a}`);t&&t.scrollIntoView({behavior:"smooth"})};return G(d,()=>{g()},{deep:!0}),(a,t)=>(i(),K(ae,null,{default:U(()=>[e("div",oe,[X(Y(Z),{href:a.route("home"),class:"inline-flex items-center px-4 py-2 bg-[#F9733A] hover:bg-[#ea652f] text-white rounded-lg transition-colors duration-200"},{default:U(()=>t[1]||(t[1]=[e("i",{class:"fas fa-home mr-2"},null,-1),b(" Home ")])),_:1},8,["href"])]),u.value.show?(i(),r("div",{key:0,class:v(["fixed top-4 right-4 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg transform transition-all duration-300",u.value.show?"translate-x-0 opacity-100":"translate-x-full opacity-0"])},[e("div",ne,[t[2]||(t[2]=e("i",{class:"fas fa-check-circle"},null,-1)),e("span",ie,n(u.value.message),1)])],2)):c("",!0),e("div",re,[e("div",de,[e("div",ce,[e("div",ue,[e("h1",ge,n(p.branch.name),1),e("div",xe,[e("span",pe,[t[3]||(t[3]=e("i",{class:"fas fa-map-marker-alt mr-2"},null,-1)),b(" "+n(p.branch.address),1)]),e("span",he,[t[4]||(t[4]=e("i",{class:"fas fa-phone mr-2"},null,-1)),b(" "+n(p.branch.contact_number),1)])])]),e("div",_e,[e("div",fe,[t[6]||(t[6]=e("label",{for:"orderType",class:"mb-1 text-sm text-gray-700 dark:text-gray-300 font-medium"},"Order Type",-1)),k(e("select",{id:"orderType","onUpdate:modelValue":t[0]||(t[0]=s=>C.value=s),onChange:D,class:"w-48 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"},t[5]||(t[5]=[e("option",{value:"delivery"},"Delivery",-1),e("option",{value:"collection"},"Collection",-1)]),544),[[ee,C.value]])])])])]),e("div",ye,[e("div",me,[e("div",be,[e("aside",ve,[e("div",ke,[t[7]||(t[7]=e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-4"},"Menu Categories",-1)),e("nav",we,[(i(!0),r(h,null,f(p.categories,s=>(i(),r("button",{key:s.id,onClick:l=>R(s.id),class:v(["w-full text-left px-4 py-3 rounded-lg transition-all duration-200 flex justify-between items-center text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",{"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":T.value===s.id}])},[e("span",Fe,n(s.name),1),e("span",Te,n(j(s.id).length),1)],10,Ce))),128))])])]),e("main",$e,[(i(!0),r(h,null,f(p.categories,s=>(i(),r("section",{key:s.id,id:`category-${s.id}`,class:"scroll-mt-24 mb-8"},[e("div",je,[e("h2",Ve,n(s.name),1),e("p",Ne,n(s.description),1)]),e("div",qe,[(i(!0),r(h,null,f(E(s.id),l=>{var o;return i(),r("article",{key:l.id,class:"bg-white dark:bg-gray-800 shadow-md overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 rounded-b-2xl"},[e("div",Ie,[l.image_path?(i(),r("img",{key:0,src:J(l.image_path),alt:l.name,class:"w-full h-full object-cover"},null,8,Ue)):c("",!0),l.is_available?c("",!0):(i(),r("div",Be,t[8]||(t[8]=[e("span",{class:"text-white font-semibold text-lg"},"Currently Unavailable",-1)])))]),e("div",Oe,[e("div",Me,[e("div",null,[e("h3",De,n(l.name),1),e("p",Ae,n(l.description),1)]),e("div",Le,[l.is_vegetarian?(i(),r("i",Pe)):c("",!0),l.is_spicy?(i(),r("i",ze)):c("",!0)])]),e("div",He,[e("div",Ee,[t[9]||(t[9]=e("i",{class:"fas fa-clock w-5 text-indigo-500"},null,-1)),e("span",null,"Prep time: "+n(l.preparation_time)+" mins",1)]),(o=l.allergens)!=null&&o.length?(i(),r("div",Je,[t[10]||(t[10]=e("i",{class:"fas fa-exclamation-circle w-5 text-amber-500"},null,-1)),e("span",null,"Allergens: "+n(l.allergens.join(", ")),1)])):c("",!0)]),e("div",Re,[e("div",Qe,[e("span",We,"৳"+n(l.base_price)+"(Full)",1),l.half_price?(i(),r("span",Ge,"৳"+n(l.half_price)+"(Half)",1)):c("",!0)]),e("button",{onClick:_=>P(l),disabled:!l.is_available,class:v(["inline-flex items-center px-5 py-2.5 rounded-lg text-sm font-medium transition-colors duration-200",[l.is_available?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-gray-300 text-gray-500 cursor-not-allowed"]])},n(l.is_available?"Add to Cart":"Not Available"),11,Ke)])])])}),128))])],8,Se))),128))]),e("div",Xe,[(i(!0),r(h,null,f(d.value,(s,l)=>(i(),r("div",{key:s.id,class:v(["bg-white dark:bg-gray-800 rounded-2xl shadow-lg top-24 p-6",l>0?"mt-2":""])},[e("div",Ye,[e("div",null,[e("h2",Ze,n(s.name),1),e("p",et,n(s.description),1)]),e("button",{onClick:o=>A(s.id),class:"absolute top-0 right-0 text-2xl text-white bg-red-600 hover:bg-red-700 rounded-full w-7 h-7 flex items-center justify-center shadow-lg",title:"Remove"},"×",8,tt)]),e("div",st,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Portion",-1)),e("div",at,[e("label",lt,[k(e("input",{type:"radio",name:`portion-${s.id}`,value:"full",class:"form-radio text-indigo-600","onUpdate:modelValue":o=>s.portion=o,onChange:o=>F(s.id),checked:""},null,40,ot),[[B,s.portion]]),e("span",null,"Full (৳"+n(s.base_price)+")",1)]),s.half_price?(i(),r("label",nt,[k(e("input",{type:"radio",name:`portion-${s.id}`,value:"half",class:"form-radio text-indigo-600","onUpdate:modelValue":o=>s.portion=o,onChange:o=>F(s.id)},null,40,it),[[B,s.portion]]),e("span",null,"Half (৳"+n(s.half_price)+")",1)])):c("",!0)])]),s.extra_options.length>0?(i(),r("div",rt,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Extra Options",-1)),e("div",null,[(i(!0),r(h,null,f(s.extra_options,o=>(i(),r("label",{key:o.id,class:"flex items-center space-x-2 text-sm text-gray-700 dark:text-gray-300"},[k(e("input",{type:"checkbox",value:o.id,class:"form-checkbox text-indigo-600","onUpdate:modelValue":_=>s.selected_extras=_,onChange:_=>F(s.id)},null,40,dt),[[se,s.selected_extras]]),e("span",null,n(o.name)+" (+৳"+n(o.price)+")",1)]))),128))])])):c("",!0),e("div",ct,[t[13]||(t[13]=e("span",{class:"text-sm text-gray-600 dark:text-gray-300"},"Quantity",-1)),e("div",ut,[e("button",{onClick:o=>H(s.id),class:"text-indigo-600 text-xl font-bold px-2"},"−",8,gt),e("span",xt,n(s.qty),1),e("button",{onClick:o=>z(s.id),class:"text-indigo-600 text-xl font-bold px-2"},"+",8,pt)])]),e("div",ht,[t[14]||(t[14]=e("span",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Total:",-1)),e("span",_t,"৳ "+n(s.total),1)])],2))),128)),d.value.length>0?(i(),r("div",ft,[e("div",yt,[t[15]||(t[15]=e("span",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300"},"Sub Total:",-1)),e("span",mt,"৳ "+n(S.value),1)]),e("button",{onClick:L,disabled:w.value,class:"w-full text-lg bg-indigo-600 text-white hover:bg-indigo-700 text-center px-5 py-2.5 rounded-lg transition-colors duration-200 flex justify-center items-center mt-2"},[w.value?(i(),r("svg",vt,t[16]||(t[16]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)]))):(i(),r(h,{key:1},[b("Proceed To Checkout")],64))],8,bt)])):c("",!0)])])])])])]),_:1}))}},Tt=le(kt,[["__scopeId","data-v-561911a3"]]);export{Tt as default};
